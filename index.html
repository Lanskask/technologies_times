<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Technology Age Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 20px;
    }
    input[type="text"] {
      width: 50%;
      padding: 10px;
      margin-bottom: 20px;
    }
    table {
      margin: 0 auto;
      border-collapse: collapse;
      width: 80%;
      margin-bottom: 40px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #f2f2f2;
    }
  </style>
</head>
<body>
<h1>Technology Age Tracker</h1>
<input type="text" id="search" placeholder="Search for technology..." onkeyup="searchTech()">

<div id="content"></div>

<script>
  const technologies = [
    { name: "FastAPI", date: "2018-12-05", category: "Framework" },
    { name: "React", date: "2013-03-01", category: "Web Development" },
    { name: "Python", date: "1991-02-01", category: "Programming Language" },
    { name: "Docker", date: "2013-03-20", category: "Containerization" },
    { name: "MongoDB", date: "2009-02-11", category: "Database" },
    { name: "TensorFlow", date: "2015-11-09", category: "Machine Learning" },
    { name: "Vue.js", date: "2014-02-01", category: "Web Development" },
    { name: "Kubernetes", date: "2014-06-07", category: "DevOps" },
  ];

  function calculateAge(creationDate) {
    const creation = new Date(creationDate);
    const now = new Date();
    const diff = new Date(now - creation);
    const years = diff.getUTCFullYear() - 1970;
    const months = diff.getUTCMonth();
    const days = diff.getUTCDate() - 1;
    return `${years} years, ${months} months, ${days} days`;
  }

  function groupTechnologiesByCategory(techList) {
    return techList.reduce((groups, tech) => {
      const category = tech.category;
      if (!groups[category]) {
        groups[category] = [];
      }
      groups[category].push(tech);
      return groups;
    }, {});
  }

  function createTechTables() {
    const contentDiv = document.getElementById('content');
    const groupedTechnologies = groupTechnologiesByCategory(technologies);
    contentDiv.innerHTML = '';

    Object.keys(groupedTechnologies).forEach(category => {
      const categoryHeading = document.createElement('h2');
      categoryHeading.textContent = category;
      contentDiv.appendChild(categoryHeading);

      const table = document.createElement('table');
      table.innerHTML = `
          <thead>
            <tr>
              <th>Technology</th>
              <th>Creation Date</th>
              <th>Age</th>
            </tr>
          </thead>
          <tbody>
            ${groupedTechnologies[category].map(tech => `
              <tr>
                <td>${tech.name}</td>
                <td>${tech.date}</td>
                <td>${calculateAge(tech.date)}</td>
              </tr>
            `).join('')}
          </tbody>
        `;
      contentDiv.appendChild(table);
    });
  }

  function updateAges() {
    createTechTables();
  }

  function searchTech() {
    const filter = document.getElementById('search').value.toLowerCase();
    const rows = document.querySelectorAll('#content table tbody tr');
    let visibleCategoryCount = 0;
    let visibleCategory = null;

    rows.forEach(row => {
      const techName = row.cells[0].textContent.toLowerCase();
      if (techName.includes(filter)) {
        row.style.display = '';
        if (!visibleCategory || visibleCategory !== row.closest('table')) {
          visibleCategoryCount++;
          visibleCategory = row.closest('table');
        }
      } else {
        row.style.display = 'none';
      }
    });

    const tables = document.querySelectorAll('#content table');
    tables.forEach(table => {
      if (visibleCategoryCount === 1 && !table.contains(visibleCategory)) {
        table.previousElementSibling.style.display = 'none';
        table.style.display = 'none';
      } else {
        table.previousElementSibling.style.display = '';
        table.style.display = '';
      }
    });
  }

  createTechTables();
  setInterval(updateAges, 1000 * 60); // Update every minute
</script>
</body>
</html>
